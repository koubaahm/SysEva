


{# templates/evaluation.html.twig #}
 
{% extends 'base.html.twig' %}
 
{% block title %}Evaluate!{% endblock %}


 
{% block body %}

<style>
  .custom-h1 {
    margin-left: 10px; /* Adjust this value as needed */
  }

.notesOverview table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 1em;
    font-family: 'Arial', sans-serif;
    table-layout: fixed; /* Utiliser des largeurs de colonnes fixes */
}

.notesOverview th, .notesOverview td {
    padding: 12px 15px;
    text-align: center; /* Center-align text in both headers and cells */
    border-bottom: 1px solid #ddd;
    width: 20%; /* DÃ©finir une largeur fixe pour les th et td */
}

.notesOverview th {
    background-color: orange;
    color: white;
}

.notesOverview tr:nth-child(even) {
    background-color: #f2f2f2;
}

.notesOverview tr:hover {
    background-color: #f1f1f1;
}

.notesOverview td:last-child {
    font-weight: bold;
}

.notesOverview td:nth-last-child(2) {
    font-style: italic;
    color: #555;
}
</style>
</nav>
<div class="h-6"></div>
<!-- Formulaire -->
<div class="flex-grow flex justify-center items-center bg-white">
  <div class="mt-3 bg-gray-200 rounded-lg shadow p-4 flex-grow flex">
    <!-- Colonne des informations de l'article -->
    <div class="w-1/2 p-4 flex flex-col items-center">
      <h1 class="text-center" style="font-size: 2em; font-family: 'Arial', sans-serif; color: #2c3e50;">Details of the Article</h1>
      <div class="h-6"></div>
      <ul class="list-none p-0 w-full">
        <li ><strong>ID :</strong> {{ article.id }}</li>
        <div class="h-6"></div>
        <li ><strong>PMID :</strong> {{ article.pmid }}</li>
        <div class="h-6"></div>
        <li ><strong>DOI :</strong> {{ article.doi }}</li>
        <div class="h-6"></div>
        <li ><strong>Title :</strong> {{ article.titre }}</li>
        <div class="h-6"></div>
        <li ><strong>Principal Author:</strong> {{ article.auteurPrincipale }}</li>
        <div class="h-6"></div>
        <li ><strong>Autors :</strong> {{ article.auteurs }}</li>
        <div class="h-6"></div>
        <li ><strong>Affiliation :</strong> {{ article.affiliation }}</li>
        <div class="h-6"></div>
        
        <li ><strong>Section :</strong> {{ article.section.nom }}</li>
        <div class="h-6"></div>
        {% if evaluation is null %}
        <li class="flex justify-center w-full"> 
            <a href="{{ path('app_grille', {'id': article.id}) }}" 
               class="bg-[#f89406] text-white p-3 rounded-lg hover:bg-orange-700 focus:outline-none">
               Evaluate
            </a>
        </li>
        {% else %}
        {% if evaluation.notes is defined %}
              <h1 class="text-center" style="font-size: 2em; font-family: 'Arial', sans-serif; color: #2c3e50;">Details of the Previous Evaluation</h1>
               <div class="h-6"></div>
               <div class="notesOverview">
               <table>
                    <tr>
                    {% for critere in criteres %}
                        <th>{{ critere.intitule }}</th>            
                    {% endfor %}    
                    </tr>
                    <tr>                        
                        {% for note in evaluation.notes %}
                            <td>{{ note }}</td>
                        {% endfor %}                        
                    </tr>
                </table>
                </div>
        <div class="h-6"></div>
        <strong>Average :</strong> {{ evaluation.moyenne }}</li>
        <div class="h-6"></div>
        <strong>Comment :</strong> {{ evaluation.commentaire }}
        <div class="h-6"></div>
         <li class="flex justify-center w-full">
            <a href="{{ path('app_eval', {'id': evaluation.id, 'article': article.id}) }}" 
               class="bg-[#f89406] text-white p-3 rounded-lg hover:bg-orange-700 focus:outline-none">
               Modify Evaluation
            </a>
        </li>
        {% endif %}
      
       
       
        {% endif %}
      </ul>      
    </div>
    <!-- Colonne du PDF -->
    <div class="w-1/2 p-4">
      <iframe src="{{ path('preview_pdf', {'filename': article.pdfFileName}) }}" width="100%" height="720px" frameborder="0"></iframe>
    </div>
  </div>
  </div>
      {% if 'ROLE_CHIEF_EDITOR' in app.user.roles or 'ROLE_ADMIN' in app.user.roles %}
      <div class="notesOverview">
    {% if evaluations is not null and evaluations is defined %}      
        <table>
            <thead>
                <tr>
                    <th>Firstname</th>
                    <th>Lastname</th>
                    {% for critere in criteres %}
                        <th>{{ critere.intitule }}</th>            
                    {% endfor %}    
                    <th>Comment</th>
                    <th>Average</th>
                </tr>
            </thead>
            <tbody>
                {% for eval in evaluations %}
                    <tr>
                        <td>{{ eval.user.nom }}</td>
                        <td>{{ eval.user.prenom }}</td>
                        {% for note in eval.notes %}
                            <td>{{ note }}</td>
                        {% endfor %}
                        <td>{{ eval.commentaire }}</td>
                        <td>{{ eval.moyenne }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</div>
      {% endif %}

</div>


 
</main>




 
{% endblock %}
